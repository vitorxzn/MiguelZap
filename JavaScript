window.updateProfileData = async () => {
    const photoURL = document.getElementById('profile-pic-url').value;
    const statusNote = document.getElementById('user-status-note').value;
    
    await update(ref(db, `users/${user.uid}/profile`), {
        photo: photoURL,
        note: statusNote,
        updatedAt: serverTimestamp()
    });
    
    // Atualiza o avatar da barra lateral instantaneamente
    document.getElementById('sidebar-avatar').src = photoURL;
    alert("Perfil atualizado na base!");
};
window.createPost = async (type, url, caption) => {
    const postData = {
        userId: user.uid,
        userName: user.displayName,
        type: type, // 'image' ou 'video'
        mediaUrl: url,
        caption: caption,
        timestamp: serverTimestamp()
    };
    await push(ref(db, 'posts'), postData);
};
